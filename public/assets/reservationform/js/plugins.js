// Avoid `console` errors in browsers that lack a console.
(function() {
    var method;
    var noop = function () {};
    var methods = [
        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',
        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',
        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',
        'timeStamp', 'trace', 'warn'
    ];
    var length = methods.length;
    var console = (window.console = window.console || {});

    while (length--) {
        method = methods[length];

        // Only stub undefined methods.
        if (!console[method]) {
            console[method] = noop;
        }
    }
}());

// Place any jQuery/helper plugins in here.
// require i18n, visible, styleSelect, dateTimePicker
// i18n
function __(){var b=arguments,c=[];for(i=1;i<b.length;i++){c.push(b[i])}return vsprintf(b[0],c)}function vsprintf(b,a){return this.sprintf.apply(this,[b].concat(a))}function sprintf(){var g=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g;var h=arguments,f=0,k=h[f++];var b=function(o,a,l,n){if(!l){l=" "}var m=(o.length>=a)?"":Array(1+a-o.length>>>0).join(l);return n?o+m:m+o};var c=function(n,m,q,a,l,p){var o=a-n.length;if(o>0){if(q||!l){n=b(n,a,p,q)}else{n=n.slice(0,m.length)+b("",o,"0",true)+n.slice(m.length)}}return n};var j=function(q,p,o,r,l,a,n){var m=q>>>0;o=o&&m&&{"2":"0b","8":"0","16":"0x"}[p]||"";q=o+b(m.toString(p),a||0,"0",false);return c(q,o,r,l,n)};var e=function(n,p,l,a,m,o){if(a!=null){n=n.slice(0,a)}return c(n,"",p,l,m,o)};var d=function(A,n,o,s,C,x,m){var a;var w;var l;var B;var u;if(A==="%%"){return"%"}var t=false,p="",r=false,z=false,y=" ";var q=o.length;for(var v=0;o&&v<q;v++){switch(o.charAt(v)){case" ":p=" ";break;case"+":p="+";break;case"-":t=true;break;case"'":y=o.charAt(v+1);break;case"0":r=true;break;case"#":z=true;break}}if(!s){s=0}else{if(s==="*"){s=+h[f++]}else{if(s.charAt(0)=="*"){s=+h[s.slice(1,-1)]}else{s=+s}}}if(s<0){s=-s;t=true}if(!isFinite(s)){throw new Error("sprintf: (minimum-)width must be finite")}if(!x){x="fFeE".indexOf(m)>-1?6:(m==="d")?0:undefined}else{if(x==="*"){x=+h[f++]}else{if(x.charAt(0)=="*"){x=+h[x.slice(1,-1)]}else{x=+x}}}u=n?h[n.slice(0,-1)]:h[f++];switch(m){case"s":return e(String(u),t,s,x,r,y);case"c":return e(String.fromCharCode(+u),t,s,x,r);case"b":return j(u,2,z,t,s,x,r);case"o":return j(u,8,z,t,s,x,r);case"x":return j(u,16,z,t,s,x,r);case"X":return j(u,16,z,t,s,x,r).toUpperCase();case"u":return j(u,10,z,t,s,x,r);case"i":case"d":a=+u||0;a=Math.round(a-a%1);w=a<0?"-":p;u=w+b(String(Math.abs(a)),x,"0",false);return c(u,w,t,s,r);case"e":case"E":case"f":case"F":case"g":case"G":a=+u;w=a<0?"-":p;l=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())];B=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2];u=w+Math.abs(a)[l](x);return c(u,w,t,s,r)[B]();default:return A}};return k.replace(g,d)};
// visible
jQuery.fn.visible=function(){return this.each(function(){var a=$(this)[0].offsetTop;var c=$(this).height();var b=$(this).parent();$(b).animate({scrollTop:a+c/2-$(b).height()/2},0)})};
// styleSelect
jQuery.fn.styleSelect=function(a){var c={class_wrap:"ul-select-wrap",class_ul:"ul-select",class_tag:"tag",direction:"top",height:190,selected_format:"%s"};var d=$.extend(c,a);var b=this;return this.each(function(){var g=this;if($(this).prop("tagName").toLowerCase()==="select"){var f=$("<div>").addClass(d.class_wrap).css({position:"relative",outline:"none"}).prop("tabindex",0);var e=$("<ul>").addClass(d.class_ul).css({position:"absolute",left:"0px",width:"100%","z-index":999,display:"none","max-height":d.height,"overflow-y":"auto"});if(d.direction=="top"){$(e).css("top","100%")}else{$(e).css("bottom","100%")}$(this).find("option").each(function(i,j){var h=$("<li>").data("value",$(this).val()).html($(this).html());$(e).append(h)});$(f).append(e);$(this).after(f);$(f).focus(function(){$(e).show();$(e).find("li").removeClass("select");$("li.selected",e).last().addClass("select").visible()}).blur(function(){$(e).hide()}).keydown(function(j){if(j.keyCode==38){var i=$(e).find("li.select").prev("li")}else{if(j.keyCode==40){var i=$(e).find("li.select").next("li");if(i.length===0){i=$(e).find("li:eq(0)")}}else{if(j.keyCode==13){$(e).find("li.select").trigger("click");return false}else{var h=String.fromCharCode(j.keyCode);if(/[a-z0-9]/i.test(h)){var i=$("li",e).filter(function(k){return $(this).html().toUpperCase().indexOf(h.toUpperCase())===0}).eq(0)}}}}if(i&&i.length!==0){$(e).find("li").removeClass("select");$(i).addClass("select").visible();return false}return true});$(e).find("li").click(function(){g.selectOption($(this).data("value"));if(!$(g).prop("multiple")){$(f).blur()}});$(g).change(function(){g.syncValue()});$(g).click(function(){$(f).trigger("focus")});$(this).hide();this.selectOption=function(j){var h=$(g).val();h=h instanceof Array?h:[h];var i=(h.indexOf(j)!==-1)?false:true;$(g).find("option").filter(function(k){return $(this).prop("value")==j}).prop("selected",i);$(g).trigger("change");g.syncValue()};this.syncValue=function(){var h=$(g).val();h=h instanceof Array?h:[h];$(e).find("li").removeClass("selected").filter(function(i){return h.indexOf($(this).data("value"))!==-1}).addClass("selected");var j=$("option[hidden]",g).map(function(i,m){return $(this).prop("value")}).toArray();$("li",e).hide().filter(function(i){return j.indexOf($(this).data("value"))===-1}).show();$(f).find("div._tag").remove();for(var k in h){if(h[k]||!$(g).prop("multiple")){var l=$("<div>").data("value",h[k]).html(__(d.selected_format,$(g).find('option[value="'+h[k]+'"]').html())).addClass("_tag").addClass(d.class_tag);$(f).append(l);if($(g).prop("multiple")){$(l).click(function(i){g.selectOption($(this).data("value"))})}}}};this.syncValue()}})};
// dateTimePicker
var DateTimePicker=function(a){if(!(this instanceof DateTimePicker)){return new DateTimePicker(a)}this.init.call(this,a);return this};DateTimePicker.prototype={init:function(a){a=$.extend({trigger:["focus"],wrap_class:"datetimepicker",day_name:["Su","Mo","Tu","We","Th","Fr","Sa"],month_name:["January","February","March","April","May","June","July","August","September","October","November","December"],day_first:0,picker:["date","time"],min_step:5,time_name:["AM","PM"],paging:['<i class="icon-i-arrow-left"></i>','<i class="icon-i-arrow-right"></i>'],timezone_title:null,get_utc:false,format:"m/d/Y h:i A",filter:function(){return true},filter_show:function(){return true},afterDraw:function(){},onChange:function(){},parse_only:false},a);this.options=a;if(this.options.parse_only){$(this.options.element).html(this.formatResult(new Date(Date.parse($(a.element).html()))));return}a.day_name=a.day_name.slice(a.day_first).concat(a.day_name.slice(0,a.day_first));a.day_index=[];for(var b=0;b<a.day_name.length;b++){a.day_index.push((a.day_first+b+7)%7)}this.picker=$("<div>").addClass("hide").addClass(a.wrap_class);this.date=new Date();if($(a.element).val()!=""){this.date=new Date(Date.parse($(a.element).val()))}if(isNaN(this.date.getTime())){this.date=new Date();this.date.setMinutes(this.date.getMinutes()-(this.date.getMinutes()%this.options.min_step))}this.date_show=new Date(this.date.getTime());if(a.get_utc){a.utc=$("<input>").prop({name:$(this.options.element).prop("name")+"_UTC",type:"hidden"});$(a.element).before(a.utc)}this.reloadPicker();var c=this;$(a.element).prop("readonly",true).addClass("datetime-picker").wrap($("<div>").css({display:$(a.element).css("display"),position:"relative"}).click(function(d){c.prevent_blur=true})).after(c.picker);$(a.element).focus(function(d){$(c.picker).css({position:"absolute",overflow:"visible",top:$(a.element).outerHeight()+"px",left:"0px"}).removeClass("hide").parent().css({"z-index":1000})});$(document).bind("click",function(){if(!c.prevent_blur){$(c.picker).addClass("hide").parent().css({"z-index":1})}c.prevent_blur=false})},formatResult:function(b){var a=this.options.format;a=a.replace("m",this.string2(b.getMonth()+1)).replace("d",this.string2(b.getDate())).replace("Y",this.string2(b.getFullYear())).replace("H",this.string2(b.getHours())).replace("h",this.get12Hours(b.getHours())).replace("A",this.getAmPm(b.getHours())).replace("i",this.string2(b.getMinutes()));return a},reloadPicker:function(){var a=this;this.picker.empty();if(this.options.picker.indexOf("date")!==-1){$(this.picker).append(this.getDatePicker(this.date_show))}if(this.options.picker.indexOf("time")!==-1){$(this.picker).append(this.getTimePicker())}if(this.options.timezone_title){$(this.picker).append($("<div>").addClass("timezone").append(this.options.timezone_title))}$(this.options.element).val(this.formatResult(this.date));if(this.options.utc){$(this.options.utc).val(this.date.toUTCString())}$("select",this.picker).styleSelect({class_wrap:"ul-dropdown-wrap time-picker",direction:"bottom"});$(".time-picker:eq(0)",this.picker).css({"margin-left":"0px"});this.options.afterDraw.call(this)},getDatePicker:function(c){var e=this;var h=new Date(c.getTime());h.setDate(1);var g=h.getDay();h.setMonth(h.getMonth()+1);h.setDate(0);var a=h.getDate();var f=g-e.options.day_index[0];var b=Math.ceil((f+a)/7);return[$("<div>").addClass("paging").append(function(){return[$("<span>").addClass("prev").append(e.options.paging[0]).click(function(){e.date_show.setMonth(e.date_show.getMonth()-1);if(e.options.filter_show(e.date_show)){e.reloadPicker()}else{e.date_show.setMonth(e.date_show.getMonth()+1)}}),$("<div>").append([e.options.month_name[h.getMonth()],", ",h.getFullYear()]),$("<span>").addClass("next").append(e.options.paging[1]).click(function(){e.date_show.setMonth(e.date_show.getMonth()+1);if(e.options.filter_show(e.date_show)){e.reloadPicker()}else{e.date_show.setMonth(e.date_show.getMonth()-1)}})]}),$("<table>").append(function(){return[$("<thead>").append(function(){return $(e.options.day_name).map(function(d,i){return $("<td>").append(i)}).toArray()}),$("<tbody>").append(function(){var j=[];for(var d=0;d<b;d++){j.push($("<tr>").append(function(){var k=[];for(var i=0;i<7;i++){var m=new Date(c.getTime());m.setDate(-f+(i+1)+(d*7));var l=e.options.filter.call(e,m);k.push($("<td>").addClass(function(){var n=[];if(!l){n.push("unvailable")}if(m.getDate()==e.date.getDate()&&m.getMonth()==e.date.getMonth()&&m.getFullYear()==e.date.getFullYear()){n.push("cur-date")}if(m.getMonth()==c.getMonth()){n.push("cur-month")}else{n.push("near-month")}return n.join(" ")}).data({date:m,available:l}).append(m.getDate()).click(function(){if(e.options.picker.indexOf("time")===-1){$(document).triggerHandler("click")}if($(this).data("available")){var n=$(this).data("date");n.setHours(e.date.getHours());n.setMinutes(e.date.getMinutes());n.setSeconds(e.date.getSeconds());e.date=new Date(n.getTime());e.date_show=new Date(n.getTime());e.options.onChange.call(e);e.reloadPicker()}}))}return k}))}return j})]})]},getTimePicker:function(){var a=this;return $("<div>").append(function(){return[$("<select>").append(function(){var c=[];var e=new Date(a.date.getTime());e.setMinutes(0);for(var b=0;b<24;b++){e.setHours(b);c.push($("<option>").prop({selected:(b==a.date.getHours()),hidden:a.options.filter.call(a,e)!=1}).val(b).append(function(){return a.get12Hours(b)+"&nbsp;"+a.getAmPm(b)}))}return c}).change(function(){a.date.setHours($(this).val());a.options.onChange.call(a);a.reloadPicker()}),$("<select>").append(function(){var c=[];var e=new Date(a.date.getTime());for(var b=0;b<60;b=b+a.options.min_step){e.setMinutes(b);c.push($("<option>").prop({selected:(b==a.date.getMinutes()),hidden:a.options.filter.call(a,e)!=1}).val(b).append(a.string2(b)))}return c}).change(function(){a.date.setMinutes($(this).val());a.options.onChange.call(a);a.reloadPicker()})]})},string2:function(a){a=a.toString();return(a.length>1)?a:"0"+a},getAmPm:function(a){return(a<12)?this.options.time_name[0]:this.options.time_name[1]},get12Hours:function(a){var b=(a<12)?a:(a-12);if(b==0){b=12}return this.string2(b)}};$.fn.dateTimePicker=function(a){return this.each(function(){var b=$(this).data("DateTimePicker");if(!b){a.element=this;$(this).data("DateTimePicker",new DateTimePicker(a))}if(typeof a==="string"){$(this).data("DateTimePicker")[a].call(this)}})};$.fn.dateTimePickerRange=function(){var b=$(this).eq(0).data("DateTimePicker");b.options.onChange=function(){if(!a.options.filter(a.date)){a.date=new Date(this.date.getTime());a.date_show=new Date(this.date.getTime())}a.reloadPicker()};var a=$(this).eq(1).data("DateTimePicker");a.options.filter=function(c){if(c.getTime()<b.date.getTime()){return false}else{return true}};a.options.filter_show=function(c){return c.getYear()>=b.date.getYear()&&c.getMonth()>=b.date.getMonth()};b.options.onChange.call(b);return this};
